<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>„É™„ÉÜ„É©„Ç∑„Éº„ÇØ„Ç§„Ç∫ - „É¢„ÉÉ„ÇØÔºàÂÖ®ÈÉ®ÂÖ•„ÇäÔºâ</title>
  <style>
    :root{
      --bg:#0f0f10;
      --board:#1e4b2a;
      --chalk:#f2f2f2;
      --wood:#b48a3a;
      --accent:#ffd46a;
      --danger:#ff6b6b;
      --ok:#6bffb0;
    }
    *{box-sizing:border-box;font-family:system-ui,-apple-system,"Noto Sans JP",sans-serif;}
    body{
      margin:0; min-height:100vh; display:flex; align-items:center; justify-content:center;
      background:radial-gradient(1000px 600px at 50% 20%, #1b1b1d, var(--bg));
      color:var(--chalk);
      padding:14px;
    }

    /* phone frameÔºàÂ§ß„Åç„ÇÅÔºâ */
    .phone{
      width:min(430px, 96vw);
      aspect-ratio:390/844;
      border:10px solid #2a2a2d;
      border-radius:28px;
      box-shadow:0 20px 60px rgba(0,0,0,.55);
      overflow:hidden;
      background:var(--board);
      position:relative;
    }

    .wood{position:absolute; inset:auto 0 0 0; height:52px; background:var(--wood);}
    .wood:before,.wood:after{
      content:""; position:absolute; bottom:10px; width:18px; height:18px;
      background:#8c6a2b; border-radius:3px;
    }
    .wood:before{left:50%; transform:translateX(-28px);}
    .wood:after {left:50%; transform:translateX(10px);}

    header{
      height:52px; display:flex; align-items:center; justify-content:center;
      font-weight:900; letter-spacing:.04em; opacity:.95;
      border-bottom:1px solid rgba(255,255,255,.10);
      position:relative;
    }
    header button{
      position:absolute; right:10px; top:10px;
      width:34px; height:34px; border-radius:10px;
      border:1px solid rgba(255,255,255,.2);
      background:rgba(0,0,0,.18); color:var(--chalk);
      cursor:pointer;
    }

    main{padding:22px 18px 84px;}
    h1{margin:10px 0 18px; font-size:26px; text-align:center;}
    h2{margin:6px 0 14px; font-size:18px; text-align:center; opacity:.95;}
    .center{display:flex; flex-direction:column; gap:14px; align-items:center;}

    .btn{
      width:88%; padding:14px 16px; border-radius:14px; cursor:pointer;
      border:1px solid rgba(255,255,255,.18);
      background:rgba(0,0,0,.18); color:var(--chalk);
      font-size:18px; font-weight:900;
    }
    .btn.primary{border-color:rgba(255,212,106,.55);}
    .btn.small{font-size:15px; font-weight:800; padding:12px 14px;}

    .row{display:flex; gap:12px; width:88%;}
    .row .btn{width:50%; font-size:16px; font-weight:900;}

    .nav{
      position:absolute; left:0; right:0; bottom:52px;
      display:flex; justify-content:space-around; padding:10px 12px;
      border-top:1px solid rgba(255,255,255,.10);
      background:rgba(0,0,0,.12);
    }
    .nav button{
      background:none; border:none; color:var(--chalk);
      opacity:.9; font-weight:900; cursor:pointer;
    }

    .card{
      border:1px solid rgba(255,255,255,.14);
      background:rgba(0,0,0,.14);
      border-radius:16px;
      padding:16px;
      line-height:1.75;
      font-size:15px;
      white-space:pre-wrap;
    }

    .choice{display:flex; gap:22px; justify-content:center; margin-top:18px;}
    .circle,.cross{
      width:72px; height:72px; border-radius:18px;
      display:grid; place-items:center; cursor:pointer;
      border:2px solid rgba(255,255,255,.35);
      background:rgba(0,0,0,.16);
      font-size:30px; font-weight:1000;
      user-select:none;
    }
    .circle{border-color:rgba(255,212,106,.6);}

    .muted{opacity:.82; font-weight:700;}
    .screen{display:none;}
    .screen.active{display:block;}

    .list{display:flex; flex-direction:column; gap:10px; width:100%;}
    .item{
      display:flex; justify-content:space-between; gap:10px;
      padding:12px 14px;
      border:1px solid rgba(255,255,255,.12);
      border-radius:14px; background:rgba(0,0,0,.12);
      font-size:14px;
    }

    .bigScore{font-size:44px; font-weight:1000; text-align:center; margin:10px 0;}
    .pill{
      display:inline-block; padding:6px 10px; border-radius:999px;
      border:1px solid rgba(255,255,255,.16);
      background:rgba(0,0,0,.12);
      font-size:12px; font-weight:900; opacity:.95;
    }

    /* „Ç∏„É£„É≥„É´„Éú„Çø„É≥ */
    .grid{
      width:88%;
      display:grid;
      grid-template-columns:1fr;
      gap:10px;
    }
    .genreBtn{
      text-align:left;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    .genreLeft{display:flex; gap:10px; align-items:flex-start;}
    .gIcon{
      width:34px; height:34px; border-radius:12px;
      display:grid; place-items:center;
      border:1px solid rgba(255,255,255,.18);
      background:rgba(0,0,0,.14);
      font-size:18px;
      flex:0 0 auto;
    }
    .genreName{font-size:16px; font-weight:1000;}
    .genreDesc{font-size:12px; opacity:.85; margin-top:3px; font-weight:700;}
    .rightArrow{opacity:.9; font-weight:1000;}

    /* „Éï„Ç£„Éº„Éâ„Éê„ÉÉ„ÇØ */
    .judge{
      font-size:28px; font-weight:1000; text-align:center;
      margin:6px 0 12px;
    }
    .judge.ok{color:var(--ok);}
    .judge.ng{color:var(--danger);}
    .mini{
      font-size:12px; opacity:.85; font-weight:800; text-align:center;
      margin-top:10px;
    }
  </style>
</head>
<body>
  <div class="phone" id="phone">
    <header>
      <span id="title">Home</span>
      <button id="homeBtn" title="Home" onclick="go('home')">‚åÇ</button>
    </header>

    <!-- HOME -->
    <section class="screen active" id="home">
      <main>
        <h1>„É™„ÉÜ„É©„Ç∑„Éº„ÇØ„Ç§„Ç∫</h1>
        <div class="center">
          <button class="btn primary" onclick="go('genre')">„Çπ„Çø„Éº„Éà</button>
          <div class="row">
            <button class="btn" onclick="go('history')">Â±•Ê≠¥</button>
            <button class="btn" onclick="go('setting')">Ë®≠ÂÆö</button>
          </div>
          <p class="muted">‚Äª„É¢„ÉÉ„ÇØÔºö„Ç∏„É£„É≥„É´‚Üí5Âïè‚ÜíËß£Ë™¨‚ÜíÁµêÊûú</p>
        </div>
      </main>
      <div class="wood"></div>
    </section>

    <!-- GENRE SELECT -->
    <section class="screen" id="genre">
      <main>
        <h2>„Ç∏„É£„É≥„É´„ÇíÈÅ∏Êäû</h2>
        <div class="grid" id="genreList"></div>
        <div class="center" style="margin-top:14px;">
          <button class="btn small" onclick="go('home')">Êàª„Çã</button>
        </div>
      </main>
      <div class="wood"></div>
    </section>

    <!-- QUIZ -->
    <section class="screen" id="quiz">
      <main>
        <div style="display:flex;justify-content:space-between;align-items:center;gap:10px;margin-bottom:10px;">
          <span class="pill" id="genrePill">„Ç∏„É£„É≥„É´</span>
          <span class="pill" id="progressPill">1/5</span>
        </div>

        <div class="card" id="qText"></div>

        <div class="choice">
          <div class="circle" onclick="answer(true)">‚óã</div>
          <div class="cross" onclick="answer(false)">√ó</div>
        </div>

        <p class="muted" style="text-align:center;margin-top:14px;">
          „ÄåÊ≠£„Åó„ÅÑ„Å®ÊÄù„ÅÜÊñπ„Äç„ÇíÈÅ∏„Å∂
        </p>
      </main>
      <div class="wood"></div>
    </section>

    <!-- FEEDBACKÔºàÊØéÂïè„ÅÆÊ≠£Ë™§Ëß£Ë™¨Ôºâ -->
    <section class="screen" id="feedback">
      <main>
        <div style="display:flex;justify-content:space-between;align-items:center;gap:10px;margin-bottom:10px;">
          <span class="pill" id="fbGenre">„Ç∏„É£„É≥„É´</span>
          <span class="pill" id="fbProgress">1/5</span>
        </div>

        <div class="judge" id="judgeText">Ê≠£Ëß£ÔºÅ</div>

        <div class="card" id="expText"></div>

        <div class="center" style="margin-top:16px;">
          <button class="btn primary" id="nextBtn" onclick="nextFromFeedback()">Ê¨°„Å∏</button>
          <button class="btn" onclick="go('home')">„Éõ„Éº„É†„Å´Êàª„Çã</button>
        </div>

        <div class="mini">‚ÄªËß£Ë™¨„ÅØ„Äå„Å™„Åú„Åù„ÅÜÂà§Êñ≠„Åô„Çã„Åã„Äç„ÇíÁü≠„Åè„Åæ„Å®„ÇÅ„Å¶„ÅÑ„Åæ„Åô</div>
      </main>
      <div class="wood"></div>
    </section>

    <!-- RESULT -->
    <section class="screen" id="result">
      <main>
        <div class="bigScore" id="scoreLine">„Çπ„Ç≥„Ç¢ 0/5</div>
        <div class="card">
          <div>„Ç∏„É£„É≥„É´Ôºö<b id="resGenre">-</b></div>
          <div style="margin-top:10px;">Ê≠£Ëß£Ôºö<b id="ok">0</b></div>
          <div>‰∏çÊ≠£Ëß£Ôºö<b id="ng">0</b></div>
        </div>
        <div class="center" style="margin-top:18px;">
          <button class="btn" onclick="go('home')">„Éõ„Éº„É†„Å´Êàª„Çã</button>
          <button class="btn" onclick="go('genre')">Âà•„Ç∏„É£„É≥„É´„ÇíÈÅ∏„Å∂</button>
          <button class="btn" onclick="restart()">Âêå„Åò„Ç∏„É£„É≥„É´„Åß„ÇÇ„ÅÜ‰∏ÄÂ∫¶</button>
        </div>
      </main>
      <div class="wood"></div>
    </section>

    <!-- HISTORY -->
    <section class="screen" id="history">
      <main>
        <h1 style="font-size:22px;">Â±•Ê≠¥</h1>
        <div class="list" id="histList"></div>
        <div class="center" style="margin-top:14px;">
          <button class="btn small" onclick="clearHist()">Â±•Ê≠¥„ÇíÊ∂à„Åô</button>
        </div>
        <p class="muted" style="margin-top:12px;">‚Äª„É≠„Éº„Ç´„É´‰øùÂ≠òÔºà„É¢„ÉÉ„ÇØÔºâ</p>
      </main>
      <div class="wood"></div>
    </section>

    <!-- SETTING -->
    <section class="screen" id="setting">
      <main>
        <h1 style="font-size:22px;">setting</h1>
        <div class="list">
          <div class="item"><span class="muted">BGM</span><span>100%</span></div>
          <div class="item"><span class="muted">SE</span><span>100%</span></div>
          <div class="item"><span class="muted">ÊñáÂ≠ó„Çµ„Ç§„Ç∫</span><span>‰∏≠</span></div>
          <div class="item"><span class="muted">„ÉÜ„Éº„Éû</span><span>„ÉÄ„Éº„ÇØ</span></div>
        </div>
      </main>
      <div class="wood"></div>
    </section>

    <div class="nav">
      <button onclick="go('home')">Home</button>
      <button onclick="go('history')">Â±•Ê≠¥</button>
      <button onclick="go('setting')">Ë®≠ÂÆö</button>
    </div>
  </div>

<script>
  // 5„Ç∏„É£„É≥„É´ √ó ÂêÑ5ÂïèÔºàtext/ans/expÔºâ
  const bank = {
    "„Éï„Çß„Ç§„ÇØ„Éã„É•„Éº„Çπ": [
      { text:"1) „ÄéÂÖ¨Âºè„ÅåÁô∫Ë°®„Äè„Å®Êõ∏„ÅÑ„Å¶„ÅÇ„Å£„Å¶„ÇÇ„ÄÅÂá∫ÂÖ∏„ÇÑÁô∫‰ø°ÂÖÉ„ÇíÁ¢∫Ë™ç„Åô„Çã„ÅÆ„ÅåÊúõ„Åæ„Åó„ÅÑ„ÄÇ", ans:true,
        exp:"ÁêÜÁî±Ôºö„ÄéÂÖ¨Âºè„Äè„Å®„ÅÑ„ÅÜË®ÄËëâ„Å†„Åë„Åß„ÅØÊ†πÊã†„Å´„Å™„Çä„Åæ„Åõ„Çì„ÄÇÁô∫‰ø°ÂÖÉÔºàÂÖ¨Âºè„Çµ„Ç§„Éà„ÉªÂÖ¨ÂºèSNS„ÉªÂ†±ÈÅìÊ©üÈñ¢Ôºâ„ÇíÁ¢∫Ë™ç„Åó„Å¶Ë£èÂèñ„Çä„Åô„Çã„ÅÆ„ÅåÂü∫Êú¨„Åß„Åô„ÄÇ" },
      { text:"2) Êã°Êï£Êï∞„ÅåÂ§ö„ÅÑÊäïÁ®ø„Åª„Å©Ê≠£„Åó„ÅÑÂèØËÉΩÊÄß„ÅåÈ´ò„ÅÑ„ÅÆ„Åß„ÄÅÁ¢∫Ë™ç„ÅØ‰∏çË¶Å„Å†„ÄÇ", ans:false,
        exp:"ÁêÜÁî±ÔºöÊã°Êï£„ÅØ„ÄéÊ≠£„Åó„Åï„Äè„Åß„ÅØ„Å™„Åè„ÄéÊÑüÊÉÖ„ÇíÂãï„Åã„ÅôÂº∑„Åï„Äè„ÅßËµ∑„Åç„ÇÑ„Åô„ÅÑ„Åß„Åô„ÄÇÊ†πÊã†„ÇÑÂá∫ÂÖ∏„ÇíÁ¢∫Ë™ç„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ" },
      { text:"3) ÁîªÂÉè‰ªò„Åç„Åß„ÇÇ„ÄÅÂàá„ÇäÂèñ„Çä„ÉªÂä†Â∑•„ÅÆÂèØËÉΩÊÄß„Åå„ÅÇ„Çã„Åü„ÇÅÊ≥®ÊÑè„ÅåÂøÖË¶Å„Å†„ÄÇ", ans:true,
        exp:"ÁêÜÁî±ÔºöÁîªÂÉè„ÅØÁ∑®ÈõÜ„ÇÑÊñáËÑà„ÅÆÂàá„ÇäÂèñ„Çä„Åå„Åß„Åç„Åæ„Åô„ÄÇÂÖÉÁîªÂÉè„ÉªÂÖÉË®ò‰∫ã„ÉªÊíÆÂΩ±Êó•ÊôÇ„Å™„Å©„ÅÆÁ¢∫Ë™ç„ÅåÊúâÂäπ„Åß„Åô„ÄÇ" },
      { text:"4) „Çø„Ç§„Éà„É´„Å†„Åë„ÅßÂà§Êñ≠„Åó„Å¶„ÇÇ„ÄÅÂÜÖÂÆπ„ÅØ„Å†„ÅÑ„Åü„ÅÑÂêå„Åò„Å™„ÅÆ„ÅßÂïèÈ°å„Å™„ÅÑ„ÄÇ", ans:false,
        exp:"ÁêÜÁî±Ôºö„Çø„Ç§„Éà„É´„ÅØË™§Ëß£„ÇíÁîü„ÇÄË°®Áèæ„ÇÇ„ÅÇ„Çä„Åæ„Åô„ÄÇÊú¨Êñá„ÅÆÊù°‰ª∂„ÉªÊï∞Â≠ó„ÉªÂâçÊèê„ÅåÈÅï„ÅÜ„Åì„Å®„ÅåÂ§ö„ÅÑ„Åß„Åô„ÄÇ" },
      { text:"5) Ë§áÊï∞„ÅÆ‰ø°È†º„Åß„Åç„ÇãÂ™í‰Ωì„ÅßÂêå„ÅòÂÜÖÂÆπ„ÅåÁ¢∫Ë™ç„Åß„Åç„Çã„Å®‰ø°È†ºÊÄß„Åå‰∏ä„Åå„Çã„ÄÇ", ans:true,
        exp:"ÁêÜÁî±ÔºöÁã¨Ëá™ÊÉÖÂ†±„ÅØË™§„Çä„ÇÇ„ÅÇ„Çä„Åà„Åæ„Åô„ÄÇË§áÊï∞„ÅÆ‰ø°È†º„Åß„Åç„ÇãÊÉÖÂ†±Ê∫ê„Åß‰∏ÄËá¥„Åô„Çã„Å®‰ø°È†ºÊÄß„ÅåÈ´ò„Åæ„Çä„Åæ„Åô„ÄÇ" },
    ],
    "SNS„Éû„Éä„Éº": [
      { text:"1) ÂèãÈÅî„ÅÆÂÜôÁúü„ÇíËºâ„Åõ„ÇãÂâç„Å´„ÄÅÊú¨‰∫∫„ÅÆÂêåÊÑè„ÇíÂèñ„Çã„ÅÆ„ÅåÊúõ„Åæ„Åó„ÅÑ„ÄÇ", ans:true,
        exp:"ÁêÜÁî±ÔºöËÇñÂÉèÊ®©„Éª„Éó„É©„Ç§„Éê„Ç∑„Éº„ÅÆÂïèÈ°å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇË®±ÂèØ„ÇíÂèñ„Çã„ÅÆ„ÅåÂÆâÂÖ®„Åß„Éà„É©„Éñ„É´„ÇÇÈò≤„Åí„Åæ„Åô„ÄÇ" },
      { text:"2) DM„ÅÆÂÜÖÂÆπ„ÅØÂÄã‰∫∫Èñì„ÅÆ„ÇÇ„ÅÆ„Å™„ÅÆ„Åß„ÄÅ„Çπ„ÇØ„Ç∑„Éß„Åó„Å¶ÂÖ¨Èñã„Åó„Å¶„ÇÇÂïèÈ°å„Å™„ÅÑ„ÄÇ", ans:false,
        exp:"ÁêÜÁî±ÔºöDM„ÇÇ„Éó„É©„Ç§„Éê„Ç∑„ÉºÊÉÖÂ†±„Åß„Åô„ÄÇÂÖ¨Èñã„ÅØ‰ø°È†º„ÇíÂ£ä„Åó„ÄÅ„Éà„É©„Éñ„É´„ÇÑÂêçË™âÊØÄÊêç„Å´„Å§„Å™„Åå„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ" },
      { text:"3) Âº∑„ÅÑË®ÄËëâ„ÅßËøî‰ø°„Åô„ÇãÂâç„Å´„ÄÅ‰∏ÄÂ∫¶ËêΩ„Å°ÁùÄ„ÅÑ„Å¶Ë¶ãÁõ¥„Åô„ÅÆ„ÅåÂÆâÂÖ®„Å†„ÄÇ", ans:true,
        exp:"ÁêÜÁî±ÔºöÊÑüÊÉÖÁöÑ„Å™ÊäïÁ®ø„ÅØÁÇé‰∏ä„ÉªË™§Ëß£„ÇíÊãõ„Åç„ÇÑ„Åô„ÅÑ„Åß„Åô„ÄÇÊôÇÈñì„ÇíÁΩÆ„ÅÑ„Å¶Ë¶ãÁõ¥„Åô„ÅÆ„ÅåÊúâÂäπ„Åß„Åô„ÄÇ" },
      { text:"4) ÁÇé‰∏ä„Åó„Å¶„ÅÑ„ÇãË©±È°å„Å´„ÅØ„ÄÅÂÜóË´á„Åß„ÇÇ‰æø‰πó„Ç≥„É°„É≥„Éà„Åó„Å¶„Çà„ÅÑ„ÄÇ", ans:false,
        exp:"ÁêÜÁî±ÔºöÂÜóË´á„Åß„ÇÇÂàá„ÇäÂèñ„Çâ„Çå„Å¶Êã°Êï£„Åï„Çå„Çã„Åì„Å®„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇË™§Ëß£„Åï„Çå„ÇÑ„Åô„ÅÑÂ†¥„Åß„ÅØÊÖéÈáç„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ" },
      { text:"5) ÊäïÁ®ø„ÅØÂ∞ÜÊù•Ë¶ã„Çâ„Çå„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çã„Åü„ÇÅ„ÄÅÊÆã„ÇãÂâçÊèê„ÅßÊõ∏„Åè„Åπ„Åç„Å†„ÄÇ", ans:true,
        exp:"ÁêÜÁî±Ôºö„Çπ„ÇØ„Ç∑„Éß„ÉªËª¢Ëºâ„ÉªÊ§úÁ¥¢„ÅßÊÆã„Çã„Åì„Å®„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„ÄéÂ∞ÜÊù•„ÅÆËá™ÂàÜ„ÅåË¶ã„Å¶„ÇÇÂ§ß‰∏àÂ§´„Åã„Äè„ÅßÂà§Êñ≠„Åó„Åæ„Åô„ÄÇ" },
    ],
    "„Éç„ÉÉ„ÉàË©êÊ¨∫": [
      { text:"1) „ÄéËá≥ÊÄ•„Äè„ÄéÂΩìÈÅ∏„Äè„ÄéÊú™Êâï„ÅÑ„Äè„Å™„Å©‰∏çÂÆâ„ÇíÁÖΩ„ÇãÊñáÈù¢„ÅØË©êÊ¨∫„ÅÆÂèØËÉΩÊÄß„Åå„ÅÇ„Çã„ÄÇ", ans:true,
        exp:"ÁêÜÁî±ÔºöÁÑ¶„Çâ„Åõ„Å¶Âà§Êñ≠Âäõ„Çí‰∏ã„Åí„Çã„ÅÆ„ÅØÂÖ∏ÂûãÁöÑÊâãÂè£„Åß„Åô„ÄÇ„Åæ„ÅöËêΩ„Å°ÁùÄ„ÅÑ„Å¶ÂÖ¨ÂºèÁµåË∑Ø„ÅßÁ¢∫Ë™ç„Åó„Åæ„Åô„ÄÇ" },
      { text:"2) Áü•„Çâ„Å™„ÅÑÁï™Âè∑„Åã„Çâ„ÅÆSMS„Åß„ÇÇ„ÄÅ„É™„É≥„ÇØÂÖà„Åå„Åù„Çå„Å£„ÅΩ„Åë„Çå„Å∞Èñã„ÅÑ„Å¶„Çà„ÅÑ„ÄÇ", ans:false,
        exp:"ÁêÜÁî±ÔºöÂÅΩ„Çµ„Ç§„Éà„Å´Ë™òÂ∞é„Åï„Çå„ÇãÂç±Èô∫„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇSMS„ÅÆ„É™„É≥„ÇØ„ÅØÈñã„Åã„ÅöÂÖ¨Âºè„Çµ„Ç§„Éà/ÂÖ¨Âºè„Ç¢„Éó„É™„Åã„ÇâÁ¢∫Ë™ç„Åó„Åæ„Åô„ÄÇ" },
      { text:"3) ÂÖ¨Âºè„ÇíÂêç‰πó„Çã„É°„Éº„É´„Åß„ÇÇ„ÄÅÈÄÅ‰ø°ÂÖÉ„Éâ„É°„Ç§„É≥„ÇÑURL„ÇíÁ¢∫Ë™ç„Åô„Çã„ÅÆ„ÅåÂ§ßÂàá„ÄÇ", ans:true,
        exp:"ÁêÜÁî±ÔºöÂ∑ÆÂá∫‰∫∫Âêç„ÅØÂÅΩË£Ö„Åß„Åç„Åæ„Åô„ÄÇ„Éâ„É°„Ç§„É≥„ÇÑURLÔºàÁ∂¥„ÇäÔºâ„ÇíÁ¢∫Ë™ç„Åó„ÄÅÊÄ™„Åó„Åë„Çå„Å∞Èñã„Åã„Å™„ÅÑ„ÅÆ„ÅåÂü∫Êú¨„Åß„Åô„ÄÇ" },
      { text:"4) „Éë„Çπ„ÉØ„Éº„ÉâÂÜçË®≠ÂÆö„ÅØ„ÄÅ„É°„Éº„É´„ÅÆ„É™„É≥„ÇØ„Åã„ÇâÁõ¥Êé•ÂÖ•„Çã„ÅÆ„ÅåÊúÄ„ÇÇÂÆâÂÖ®„Å†„ÄÇ", ans:false,
        exp:"ÁêÜÁî±ÔºöÂÅΩ„É™„É≥„ÇØ„ÅÆÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„Éñ„ÉÉ„ÇØ„Éû„Éº„ÇØ„ÇÑÂÖ¨Âºè„Ç¢„Éó„É™„Åã„Çâ„É≠„Ç∞„Ç§„É≥„Åó„Å¶ÂÜçË®≠ÂÆö„Åô„ÇãÊñπ„ÅåÂÆâÂÖ®„Åß„Åô„ÄÇ" },
      { text:"5) Â∞ë„Åó„Åß„ÇÇÊÄ™„Åó„ÅÑ„Å®ÊÑü„Åò„Åü„Çâ„ÄÅÂÖ¨Âºè„Çµ„Ç§„Éà/ÂÖ¨Âºè„Ç¢„Éó„É™„Åã„ÇâÁ¢∫Ë™ç„Åô„Çã„ÄÇ", ans:true,
        exp:"ÁêÜÁî±ÔºöÊÄ™„Åó„ÅÑÈÄ£Áµ°„ÅØ„ÄéÂÖ¨ÂºèÁµåË∑Ø„ÅßÂÜçÁ¢∫Ë™ç„Äè„ÅåÈâÑÂâá„Åß„Åô„ÄÇË¢´ÂÆ≥„ÅÆÂ§ö„Åè„ÅØ„É™„É≥„ÇØ„ÇíË∏è„ÇÄ„Åì„Å®„Åã„ÇâÂßã„Åæ„Çä„Åæ„Åô„ÄÇ" },
    ],
    "ÂÄã‰∫∫ÊÉÖÂ†±": [
      { text:"1) ‰ΩèÊâÄ„ÅåÁâπÂÆö„Åï„Çå„ÇãÊÉÖÂ†±ÔºàÂ≠¶Ê†°Âêç„ÉªÊúÄÂØÑ„Çä„ÉªËÉåÊôØ„ÅÆÁúãÊùø„Å™„Å©Ôºâ„Å´Ê≥®ÊÑè„Åô„Çã„ÄÇ", ans:true,
        exp:"ÁêÜÁî±ÔºöÊñ≠ÁâáÊÉÖÂ†±„ÅÆÁµÑ„ÅøÂêà„Çè„Åõ„ÅßÁâπÂÆö„Åï„Çå„Åæ„Åô„ÄÇËÉåÊôØ„ÇÑÂà∂Êúç„ÄÅÈÄöÂ≠¶„É´„Éº„Éà„ÅÆÊò†„ÇäËæº„Åø„Å´„ÇÇÊ≥®ÊÑè„Åó„Åæ„Åô„ÄÇ" },
      { text:"2) ‰ΩçÁΩÆÊÉÖÂ†±„ÅÆËá™Âãï‰ªò‰∏é„ÅØ‰æøÂà©„Å™„ÅÆ„Åß„ÄÅÂü∫Êú¨ON„ÅÆ„Åæ„Åæ„ÅßÂïèÈ°å„Å™„ÅÑ„ÄÇ", ans:false,
        exp:"ÁêÜÁî±ÔºöËá™ÂÆÖ„ÇÑË°åÂãïÁØÑÂõ≤„ÅåÁâπÂÆö„Åï„Çå„ÇãÂç±Èô∫„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇÂøÖË¶Å„Å™ÊôÇ„Å†„ÅëON„Å´„Åô„Çã„ÅÆ„ÅåÂÆâÂÖ®„Åß„Åô„ÄÇ" },
      { text:"3) Ë™ïÁîüÊó•ÔºãÈõªË©±Áï™Âè∑„Å™„Å©„ÅØ„ÄÅÁµÑ„ÅøÂêà„Çè„Åõ„Çã„Å®Êú¨‰∫∫ÁâπÂÆö„Å´Áπã„Åå„Çä„ÇÑ„Åô„ÅÑ„ÄÇ", ans:true,
        exp:"ÁêÜÁî±ÔºöË§áÊï∞„ÅÆÊÉÖÂ†±„ÅåÊèÉ„ÅÜ„Å®Êú¨‰∫∫Á¢∫Ë™ç„Å´‰Ωø„Çè„Çå„ÇÑ„Åô„ÅÑ„Åß„Åô„ÄÇÂÖ¨ÈñãÁØÑÂõ≤„ÇÑÊäïÁ®øÂÜÖÂÆπ„Å´Ê≥®ÊÑè„Åó„Åæ„Åô„ÄÇ" },
      { text:"4) ÂÖ¨Èñã„Ç¢„Ç´„Ç¶„É≥„Éà„Åß„ÇÇ„ÄÅÂèãÈÅî„Å†„Åë„ÅåË¶ã„ÇãÂâçÊèê„ÅßÊäïÁ®ø„Åó„Å¶„Çà„ÅÑ„ÄÇ", ans:false,
        exp:"ÁêÜÁî±ÔºöÂÖ¨ÈñãÔºùË™∞„Åß„ÇÇË¶ã„Çâ„Çå„Åæ„Åô„ÄÇÊã°Êï£„Éª‰øùÂ≠ò„Åï„Çå„ÇãÂâçÊèê„ÅßÊäïÁ®ø„Åô„Çã„ÅÆ„ÅåÂÆâÂÖ®„Åß„Åô„ÄÇ" },
      { text:"5) „Ç¢„Éó„É™„ÅÆÊ®©ÈôêÔºà‰ΩçÁΩÆÊÉÖÂ†±/ÈÄ£Áµ°ÂÖà„Å™„Å©Ôºâ„ÅØÂøÖË¶ÅÊúÄÂ∞èÈôê„Å´„Åô„Çã„ÅÆ„ÅåÂÆâÂÖ®„ÄÇ", ans:true,
        exp:"ÁêÜÁî±Ôºö‰∏çË¶Å„Å™Ê®©Èôê„ÅØ„É™„Çπ„ÇØ„Å´„Å™„Çä„Åæ„Åô„ÄÇÁõÆÁöÑ„Å´ÂøÖË¶Å„Å™Ê®©Èôê„Å†„ÅëË®±ÂèØ„Åô„Çã„ÅÆ„ÅåÂü∫Êú¨„Åß„Åô„ÄÇ" },
    ],
    "„Éë„Çπ„ÉØ„Éº„Éâ": [
      { text:"1) Âêå„Åò„Éë„Çπ„ÉØ„Éº„Éâ„ÅÆ‰Ωø„ÅÑÂõû„Åó„ÅØ„ÄÅÊµÅÂá∫ÊôÇ„ÅÆË¢´ÂÆ≥„ÅåÂ§ß„Åç„Åè„Å™„Çã„ÄÇ", ans:true,
        exp:"ÁêÜÁî±Ôºö1„Å§Êºè„Çå„Çã„Å®‰ªñ„Çµ„Éº„Éì„Çπ„ÇÇÈÄ£ÈéñÁöÑ„Å´‰æµÂÆ≥„Åï„Çå„Åæ„Åô„ÄÇ„Çµ„Éº„Éì„Çπ„Åî„Å®„Å´Âà•„Éë„Çπ„ÅåÂÆâÂÖ®„Åß„Åô„ÄÇ" },
      { text:"2) Ë™ïÁîüÊó•„ÇÑÂêçÂâç„ÅØË¶ö„Åà„ÇÑ„Åô„ÅÑ„ÅÆ„Åß„ÄÅÂº∑„ÅÑ„Éë„Çπ„ÉØ„Éº„Éâ„Å®„Åó„Å¶ÂçÅÂàÜ„Å†„ÄÇ", ans:false,
        exp:"ÁêÜÁî±ÔºöÊé®Ê∏¨„Åï„Çå„ÇÑ„Åô„ÅÑÊÉÖÂ†±„Åß„Åô„ÄÇÈï∑„Åè„Å¶„É©„É≥„ÉÄ„É†„Å™ÊñáÂ≠óÂàóÔºà„Éï„É¨„Éº„Ç∫Âûã„Åß„ÇÇOKÔºâ„ÅåÂº∑„ÅÑ„Åß„Åô„ÄÇ" },
      { text:"3) Èï∑„Åè„Å¶Ë§áÈõë„Å™„Éë„Çπ„ÉØ„Éº„Éâ„Åª„Å©Êé®Ê∏¨„Åï„Çå„Å´„Åè„ÅÑ„ÄÇ", ans:true,
        exp:"ÁêÜÁî±ÔºöÈï∑„Åï„ÅØÂº∑Â∫¶„Å´Áõ¥Áµê„Åó„Åæ„Åô„ÄÇÂèØËÉΩ„Å™„Çâ„Éë„Çπ„ÉØ„Éº„ÉâÁÆ°ÁêÜ„ÉÑ„Éº„É´ÔºãÈï∑„ÅÑ„Éë„Çπ„ÅßÈÅãÁî®„Åó„Åæ„Åô„ÄÇ" },
      { text:"4) „Éë„Çπ„ÉØ„Éº„Éâ„ÅØÂÆöÊúüÁöÑ„Å´Áü≠„ÅèÂ§âÊõ¥„Åô„Çã„Å®ÂÆâÂÖ®ÊÄß„Åå‰∏ä„Åå„Çã„ÄÇ", ans:false,
        exp:"ÁêÜÁî±ÔºöÁü≠„Åè„Åô„Çã„Å®Âº±„Åè„Å™„Çä„Åæ„Åô„ÄÇ„ÄéÊºè„Çå„ÅüÂèØËÉΩÊÄß„Åå„ÅÇ„ÇãÊôÇ„Å´Â§âÊõ¥„ÄèÔºã„ÄéÈï∑„ÅèÂº∑„Åè„Äè„ÅåÂü∫Êú¨„Åß„Åô„ÄÇ" },
      { text:"5) ‰∫åÊÆµÈöéË™çË®º„Çí‰Ωø„ÅÜ„Å®„ÄÅ‰∏çÊ≠£„É≠„Ç∞„Ç§„É≥„ÅÆ„É™„Çπ„ÇØ„Åå‰∏ã„Åå„Çã„ÄÇ", ans:true,
        exp:"ÁêÜÁî±Ôºö„Éë„Çπ„ÉØ„Éº„Éâ„ÅåÊºè„Çå„Å¶„ÇÇËøΩÂä†Ë™çË®º„ÅßÊ≠¢„ÇÅ„Çâ„Çå„Åæ„Åô„ÄÇÂèØËÉΩ„Å™„Çµ„Éº„Éì„Çπ„ÅØON„ÅåÊé®Â•®„Åß„Åô„ÄÇ" },
    ],
  };

  const meta = [
    { name:"„Éï„Çß„Ç§„ÇØ„Éã„É•„Éº„Çπ", icon:"üì∞", desc:"Âá∫ÂÖ∏„ÉªÊã°Êï£„ÉªÁîªÂÉè„ÅÆË¶ãÊ•µ„ÇÅ" },
    { name:"SNS„Éû„Éä„Éº",       icon:"üí¨", desc:"ÊäïÁ®ø„ÉªËøî‰ø°„ÉªÂêåÊÑè„ÅÆÂü∫Êú¨" },
    { name:"„Éç„ÉÉ„ÉàË©êÊ¨∫",       icon:"‚ö†Ô∏è", desc:"SMS/„É°„Éº„É´/ÂÅΩ„Çµ„Ç§„ÉàÂØæÁ≠ñ" },
    { name:"ÂÄã‰∫∫ÊÉÖÂ†±",         icon:"üîí", desc:"ÁâπÂÆö„Åï„Çå„ÇãÊÉÖÂ†±„Å®Ê®©Èôê" },
    { name:"„Éë„Çπ„ÉØ„Éº„Éâ",       icon:"üîë", desc:"‰Ωø„ÅÑÂõû„Åó„ÉªÂº∑Â∫¶„Éª‰∫åÊÆµÈöéË™çË®º" },
  ];

  // Áä∂ÊÖã
  let currentGenre = null;
  let questions = [];
  let idx = 0, ok = 0, ng = 0;

  // „Éï„Ç£„Éº„Éâ„Éê„ÉÉ„ÇØÁî®
  let lastWasCorrect = false;
  let lastExp = "";
  let lastProgressText = "";

  // Â±•Ê≠¥
  const HIST_KEY = "lit_hist_v3";
  function loadHist(){ return JSON.parse(localStorage.getItem(HIST_KEY) || "[]"); }
  function saveHist(list){ localStorage.setItem(HIST_KEY, JSON.stringify(list.slice(0, 30))); }

  // ÁîªÈù¢ÈÅ∑Áßª
  function go(id){
    document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
    document.getElementById(id).classList.add("active");

    document.getElementById("title").textContent =
      id==="home" ? "Home" :
      id==="genre" ? "Genre" :
      id==="quiz" ? "Quiz" :
      id==="feedback" ? "Explain" :
      id==="result" ? "Result" :
      id==="history" ? "Â±•Ê≠¥" : "Ë®≠ÂÆö";

    if(id==="genre") renderGenres();
    if(id==="history") renderHist();
  }

  // „Ç∏„É£„É≥„É´‰∏ÄË¶ß
  function renderGenres(){
    const el = document.getElementById("genreList");
    el.innerHTML = "";
    meta.forEach(m=>{
      const btn = document.createElement("button");
      btn.className = "btn small genreBtn";
      btn.onclick = () => startGenre(m.name);
      btn.innerHTML = `
        <div class="genreLeft">
          <div class="gIcon">${m.icon}</div>
          <div>
            <div class="genreName">${m.name}</div>
            <div class="genreDesc">${m.desc}</div>
          </div>
        </div>
        <div class="rightArrow">‚ñ∂</div>
      `;
      el.appendChild(btn);
    });
  }

  // „Ç∏„É£„É≥„É´ÈñãÂßã
  function startGenre(g){
    currentGenre = g;
    questions = bank[g].slice(0, 5);
    idx = 0; ok = 0; ng = 0;

    updateQuizUI();
    go("quiz");
  }

  function updateQuizUI(){
    document.getElementById("genrePill").textContent = currentGenre;
    document.getElementById("progressPill").textContent = `${idx+1}/${questions.length}`;
    document.getElementById("qText").textContent = questions[idx].text;
  }

  // ÂõûÁ≠î ‚Üí „Éï„Ç£„Éº„Éâ„Éê„ÉÉ„ÇØ„Å∏
  function answer(choice){
    const q = questions[idx];
    lastWasCorrect = (q.ans === choice);
    lastExp = q.exp;
    lastProgressText = `${idx+1}/${questions.length}`;

    if(lastWasCorrect) ok++; else ng++;

    // „Éï„Ç£„Éº„Éâ„Éê„ÉÉ„ÇØË°®Á§∫
    document.getElementById("fbGenre").textContent = currentGenre;
    document.getElementById("fbProgress").textContent = lastProgressText;

    const jt = document.getElementById("judgeText");
    jt.textContent = lastWasCorrect ? "Ê≠£Ëß£ÔºÅ" : "‰∏çÊ≠£Ëß£";
    jt.className = "judge " + (lastWasCorrect ? "ok" : "ng");

    document.getElementById("expText").textContent = lastExp;

    // Ê¨°„Éú„Çø„É≥ÊñáË®Ä
    const isLast = (idx === questions.length - 1);
    document.getElementById("nextBtn").textContent = isLast ? "ÁµêÊûú„Å∏" : "Ê¨°„ÅÆÂïèÈ°å„Å∏";

    go("feedback");
  }

  // „Éï„Ç£„Éº„Éâ„Éê„ÉÉ„ÇØ„Åã„ÇâÊ¨°„Å∏
  function nextFromFeedback(){
    idx++;
    if(idx >= questions.length){
      // Â±•Ê≠¥‰øùÂ≠ò
      const list = loadHist();
      list.unshift({
        date: new Date().toLocaleString(),
        genre: currentGenre,
        ok,
        total: questions.length
      });
      saveHist(list);

      // ÁµêÊûúË°®Á§∫
      document.getElementById("scoreLine").textContent = `„Çπ„Ç≥„Ç¢ ${ok}/${questions.length}`;
      document.getElementById("resGenre").textContent = currentGenre;
      document.getElementById("ok").textContent = ok;
      document.getElementById("ng").textContent = ng;

      go("result");
      return;
    }
    updateQuizUI();
    go("quiz");
  }

  function restart(){
    if(!currentGenre){ go("genre"); return; }
    startGenre(currentGenre);
  }

  // Â±•Ê≠¥
  function renderHist(){
    const el = document.getElementById("histList");
    el.innerHTML = "";
    const list = loadHist();
    if(list.length === 0){
      el.innerHTML = `<div class="card">„Åæ„Å†Â±•Ê≠¥„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</div>`;
      return;
    }
    list.forEach(r=>{
      const div = document.createElement("div");
      div.className = "item";
      div.innerHTML = `<span>${r.date}Ôºà${r.genre}Ôºâ</span><span>${r.ok}/${r.total}</span>`;
      el.appendChild(div);
    });
  }

  function clearHist(){
    localStorage.removeItem(HIST_KEY);
    renderHist();
  }

  // ÂàùÊúü
  renderGenres();
</script>
</body>
</html>
